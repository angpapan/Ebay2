<app-container>
  <app-category-nav></app-category-nav>


  <gallery [items] = "images" thumbPosition="left" [nav]="false" [counter]="false" [thumbWidth]="80" thumbView="contain" slidingDirection="vertical"></gallery>

  <div class = "d">

    <div id="top-box" class="info-box">

      <div style="text-align: center;font-size: small;"> Categories : {{item.categories}}</div>
      <h3> {{item.name}} </h3>

    </div>

    <div id="mid-box" class="info-box">

      <div>Current bid : <span style="font-style: italic;font-size: xx-large;"> {{item.price | currency:"EUR" }} </span> </div>

      <div id="bid-box">
        <button  style="background-color: #76b2f8">Bid</button>
        <input [(ngModel)]="bid">
        <div *ngIf="bid && bid < item.price" style="color:red;font-size: small;"> Your bid must be greater than {{item.price}} </div>
      </div>

      <div id = "buy-box" *ngIf="item.buyPrice && item.buyPrice > 0" > or <br>
        <button style="background-color: #76b2f8">Buy it now</button> for  <span style="font-style: italic;font-size: xx-large;"> {{item.buyPrice | currency:"EUR"}} </span>
      </div>
      <div>
        Available until :
        <div style="font-size: large;font-weight: bold;">{{item.ends| date :'medium' }}</div>
      </div>


    </div>

    <div id="low-box" class="info-box">

      <h6> Seller information</h6>
      <div id="seller-box" style="font-style: italic" [routerLink]="['/items/user/', item.sellerName]" style="cursor: pointer">{{item.sellerName}}</div>

      <div id = "location-box">

        <div> {{item.location}}, {{item.country}} </div>

        <div>( {{item.latitude}} , {{item.longitude}} ) </div>

      </div>


    </div>

  </div>

  <div>
    <h6>Description</h6>
    <div id="description-box"> {{item.description}} </div>
  </div>

  <table class="table table-striped table-hover table-bordered">
    <thead>
      <tr>
        <th colspan="100%" class="text-center" style="font-size: xx-large">
          Total Bids On Item
        </th>
      </tr>
      <tr>
        <th scope="col">Bidder Id</th>
        <th scope="col">Bidder Rating</th>
        <th scope="col">Bidder Location</th>
        <th scope="col">Bidder Country</th>
        <th scope="col">Time of bid</th>
        <th scope="col">Amount of bid</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let bid of item.bids">
        <td>{{bid.bidder.userId}}</td>
        <td>{{bid.bidder.rating}}</td>
        <td>{{bid.bidder.location}}</td>
        <td>{{bid.bidder.country}}</td>
        <td>{{bid.time|date:"medium"}}</td>
        <td>{{bid.amount|currency:"EUR"}}</td>
      </tr>
    </tbody>
  </table>

  <table class="table table-bordered">
    <thead>
      <tr>
        <th colspan="100%" class="text-center" style="font-size: xx-large">
          Auction Information
        </th>
      </tr>
      <tr>
        <td>Item Id</td>
        <td>Auction Status</td>
        <td>Starting Bid</td>
        <td>Current Bid</td>
        <td>Instant Buy</td>
        <td>Started</td>
        <td>Ends</td>
        <td>Ended</td>
        <td>Buyer</td>
      </tr>
    </thead>

    <tbody>
      <tr>
        <td>{{item.itemId}}</td>
        <td *ngIf="item.completed==true;else run">Completed</td>
        <td>{{item.firstBid|currency:"EUR"}}</td>
        <td>{{item.price|currency:"EUR"}}</td>
        <td *ngIf="item.buyPrice;else na">{{item.buyPrice|currency:"EUR"}}</td>
        <td *ngIf="item.started;else na">{{item.started|date:"medium"}}</td>
        <td>{{item.ends|date:"medium"}}</td>
        <td *ngIf="item.ended;else na">{{item.ended|date:"medium"}}</td>
        <td *ngIf="item.buyer;else na">{{item.buyer}}</td>
        <ng-template #na><td>N/A</td></ng-template>
        <ng-template #run><td>Running</td></ng-template>
      </tr>
    </tbody>
  </table>

</app-container>
